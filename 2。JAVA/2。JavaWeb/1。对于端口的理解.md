计算机中的端口的理解 

不管是硬件上的端口，还是软件上的端口，端口的理解是要建立在内存层面上的。



# 硬件上的端口

我们将usb设备插入电脑，设备上的芯片会与电脑中的内存形成联系，也就是usb上面芯片中的内层电路会与电脑中的本身的内存有个内存的来往，如果要通过这个Usb设备来传输东西，  那么电脑就会留出一个内存区域给这个外接的usb设备，可以广义的理解这个电脑为Usb 留了一个端口





![image-20211203164328991](https://raw.githubusercontent.com/Eat-garlic/picture/master/img/20240204150210.png)

如上图，外接设备插入电脑，当要执行输入时，会将输入的寄存器放到计算机内存中，计算机会根据这些寄存器来决定要给多少内存给这个输入设备 ，这个内存在计算机中又有编号 ，这个编号就是端口

所以 物理端口就是这些外设的要执行指令的寄存器之和













# 逻辑软件上的端口

所有的软件在电脑上运行，本质都是软件的运行程序在cpu中得到宠幸加载，那么 cpu加载它们时，会需要系统分配资源和内存，加载不同软件所需要 的内存不一样，所以预留的内存区域大小也就不一样，

打个比方

内存是固定的只有那么 多，我们将每块内存分为不同的编号 ，1.2.，，，，一直到49463等，甚至更多 ，这时那么我们软件运行的时候 所需要内存会根据这个软件需要资源和内存的大小cpu会给它安排合适大小区域的内存编号 指定 加载运行它，

这个编号，我们就可以理解 为是软件层面上的端口

软件运行需要进程 ，软件是由二进制的数据程序所组成，这个二进制程序在哪个端口上执行会有个数据包发送给cpu，数据包有个报文头，里面装着这个程序要在哪个编号中运行，当cpu加载这个软件程序到内存前接收到需要运行这个程序时，会根据 这个报文头中的编号，让程序就在这段编号的内存中运行，这个编号和内存就是端口比如：80   139   445



而与此端口相对应的那个进程将会领取数据并等待下一组数据的到来。那么与此端口相对应的那个进程接收到下一组数据以后，将放到哪里呢？

数据按照目的端口被推入相应的队中，等待被进程取用   

![image-20211203172304832](https://raw.githubusercontent.com/Eat-garlic/picture/master/img/20240204150252.png)









队又到底是什么呢？**队其实就对应一块内存区域，是进程用来存储自己所接收到的数据的。**

端口其实就是队，操作系统为各个进程分配了不同的队，





小码哥说服务器软件一启动就要占用一个端口，一启动就会分配系统资源给这个软件 ，就会占用内存，和进程 ，就会瞬间的给它排一个队的编号，也就是端口的编号 

请求找到这个队的内存融入进去 

