# Filter

## 为什么用filter

在做简历项目 的时候 ，服务器上的项目 只有登录后才能进入后台进行操作，我们要确认身份，项目 中一个请求对应唯一的Session,这个session对象 只要浏览器不关闭和服务器一直处理会话中，这个seesion就会一直存在，  全局的，	session里面存储 了客户的信息，

![image-20220103230443399](https://raw.githubusercontent.com/Eat-garlic/picture/master/img/20240204155931.png)

用这个方法 来存储用户的信息，每次请求时都要通过seesion来判断用户身份，如果seesion里面有用户信息，就授权访问，如果没有就打回到登录页面，这样是可以，但不严谨     项目中有些jsp页面是需要访问 servlet转发到前台页面直接就可以访问 的，在baseServlet里面判断没有 user就拦截，显然不合理，这是第一点，第二点，我们有些css，js我们是想要拦截的，不需要前台来访问，但是用这种方法 做不到

在这种背景下引用 了一个新的技术filter， 这个就可以解决上面这些痛点，



filter是什么  

创建 一个类实现 filte这个接口 然后实现 这里面的几个抽象方法 ，类上面写注解 ，表示 是拦截前台的哪些请求  /*表示什么都拦截，只有在调用了do....什么 方法 后，这个请求才会继续往下走

理解没问题，但是不能串起来，  filter用注解写在filter上，上面写的是是拦截前台发来的哪些请求，我们只要  也是要按顺序来拦截的









## 怎样使用

创建 一个filter实现 tomcat里面自带的filter接口，实现 其中的三个方法 ，里面有个dochain(req,resp)，调用 这个方法 才能让请求往下走，走到下面客户端 处理完请求便会回来调用 Filter下面的方法 



## 创建时机

 filter是在项目 从容器中移除或者 布署时创建的，并不是说项目 启动关闭时，当布置时会调用 filtet  init方法 ，当移除时，会调用 destory方法 ，



## 还有两个属性是设置可以只拦截转发还是重定向的请求，可以设置 









# listen

listen 是什么 ， 

是监听 器，每个项目在tomcat上面都有个ServletContext，这个代表了这个项目 ，项目 一部署都 是先要加载这个里面的资源 ，资源 加载后，然后完成 部署，项目 部署时，我们需要监听这个项目 的状wjj 态，可以用filter来监听，因为项目 部署和停止 都会调用 filter的 init  和des 方法 ，但是过滤器里面有其他 的业务 逻辑， 用来监听项目 的状态是不合适 的，

这时就产生 了listen，创建 一个类，实现 接口，这里面有两个 方法 ，一个是init是在项目 创建时进行初始化资源用的，可以进行资源的一些初始化。，另一个是des注销项目 时用的，资源 的回收，

一些在项目中只要运行一次的就可以在监听器中完成 初始化